{"version":3,"sources":["getWeb3.js","App.js","serviceWorker.js","index.js"],"names":["getWeb3","Promise","resolve","reject","window","addEventListener","a","ethereum","web3","Web3","enable","console","log","provider","providers","HttpProvider","App","state","accounts","contract","componentDidMount","titreAppli","debugMode","eth","getAccounts","net","getId","networkId","deployedNetwork","VotingContract","networks","instance","Contract","abi","address","setState","runInit","alertAndLog","methods","owner","call","contractOwner","getCurrentWorkflowStatus","currentWorkflowStatus","getProposals","proposals","getVotersAdresses","votersAdresses","winningProposal","contractInformation","setAccountInformation","events","VoterAdded","on","event","handleVoterAdded","error","Jsonify","stringify","WorkflowStatusChange","handleWorkflowStatusChange","ProposalRegistered","handleProposalRegistered","Voted","handleVoted","handleAccountsChanged","connectedAccount","getVoter","voterInformation","canVote","isRegistered","hasVoted","isOwner","logify","accountInformation","account","setPageInformation","pageInformation","title","explanation","displayRegisterVoters","displayStartProposal","displayStopProposal","displayRegisterProposal","displaystartVotingSession","displayStopVotingSession","displayVoteForProposal","displayAlreadyVoted","displayCountVotes","displayWinningProposal","displayResetVote","message","objectToLog","alert","reloadProposals","newAccounts","reloadedAccounts","returnValues","newStatus","registerVoters","value","send","from","then","response","catch","additionalInfo","reason","startProposalsRegistration","registerProposal","proposalDescription","stopProposalsRegistration","startVotingSession","stopVotingSession","voteForProposal","persist","target","countVotes","resetVote","divInformations","divRegisterVoters","divOwnerProposals","divStartProposal","divAjouterProposition","divVoting","divstartVotingSession","divStopVotingSession","divVoteForProposal","divCountVotes","divWinningProposal","divResetVote","this","Form","Group","Control","type","id","ref","input","Button","onClick","variant","divStopProposal","Card","Body","min","max","voteNumber","style","display","justifyContent","width","Header","description","voteCount","className","Tabs","defaultActiveKey","Tab","eventKey","ListGroup","Item","Table","striped","bordered","hover","map","proposalRecord","index","key","tdVoteForProposal","accountRecord","toString","Component","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.a9c5f0d6.chunk.js","sourcesContent":["import Web3 from \"web3\";\n\nconst getWeb3 = () =>\n  new Promise((resolve, reject) => {\n    // Wait for loading completion to avoid race conditions with web3 injection timing.\n    window.addEventListener(\"load\", async () => {\n      // Modern dapp browsers...\n      if (window.ethereum) {\n        const web3 = new Web3(window.ethereum);\n        try {\n          // Request account access if needed\n          await window.ethereum.enable();\n          // Accounts now exposed\n          resolve(web3);\n        } catch (error) {\n          reject(error);\n        }\n      }\n      // Legacy dapp browsers...\n      else if (window.web3) {\n        // Use Mist/MetaMask's provider.\n        const web3 = window.web3;\n        console.log(\"Injected web3 detected.\");\n        resolve(web3);\n      }\n      // Fallback to localhost; use dev console port by default...\n      else {\n        const provider = new Web3.providers.HttpProvider(\n          \"http://127.0.0.1:8545\"\n        );\n        const web3 = new Web3(provider);\n        console.log(\"No web3 instance injected, using Local web3.\");\n        resolve(web3);\n      }\n    });\n  });\n\nexport default getWeb3;\n","import React, { Component } from \"react\";\r\nimport { stopReportingRuntimeErrors } from \"react-error-overlay\";\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport getWeb3 from \"./getWeb3\";\r\nimport Button from 'react-bootstrap/Button';\r\nimport Card from 'react-bootstrap/Card';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Jsonify from 'jsonify';\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Tab from 'react-bootstrap/Tab';\r\nimport Table from 'react-bootstrap/Table';\r\nimport Tabs from 'react-bootstrap/Tabs';\r\nimport VotingContract from \"./contracts/Voting.json\";\r\nimport \"./App.css\";\r\n\r\nif (process.env.NODE_ENV === 'development') {\r\n  stopReportingRuntimeErrors();\r\n}\r\n\r\nclass App extends Component {\r\n\r\n  state = { web3: null, accounts: null, contract: null };\r\n  \r\n  componentDidMount = async () => {\r\n    const titreAppli = \"Défi - Système de vote\";\r\n    try {\r\n      // IMPORTANT: debugMode à passer à true/false pour visualisation dans la console !\r\n      const debugMode = false;\r\n      \r\n      // Récupérer le provider web3\r\n      const web3 = await getWeb3();\r\n  \r\n      // Utiliser web3 pour récupérer les comptes de l’utilisateur (MetaMask dans notre cas) \r\n      const accounts = await web3.eth.getAccounts();\r\n\r\n      // Récupérer l’instance du smart contract “Voting” avec web3 et les informations du déploiement du fichier (client/src/contracts/Voting.json)\r\n      const networkId = await web3.eth.net.getId();\r\n      const deployedNetwork = VotingContract.networks[networkId];\r\n  \r\n      const instance = new web3.eth.Contract(\r\n        VotingContract.abi,\r\n        deployedNetwork && deployedNetwork.address,\r\n      );\r\n\r\n      // Set web3, accounts, and contract to the state, and then proceed with an\r\n      // example of interacting with the contract's methods.\r\n      this.setState({ accounts, contract: instance, debugMode, titreAppli, web3 }, this.runInit);\r\n    } catch (error) {\r\n      // Catch any errors for any of the above operations.\r\n      this.alertAndLog('Non-Ethereum browser detected. Can you please try to install MetaMask before starting.', error);\r\n    }\r\n  };\r\n  \r\n  runInit = async() => {\r\n    const { contract } = this.state;\r\n    \r\n    // Get contract information\r\n    const contractOwner = await contract.methods.owner().call(); // propriétaire\r\n    const currentWorkflowStatus = await contract.methods.getCurrentWorkflowStatus().call();\r\n    const proposals = await contract.methods.getProposals().call(); // liste des propositions\r\n    const votersAdresses = await contract.methods.getVotersAdresses().call(); // liste des comptes autorisés\r\n    const winningProposal = await contract.methods.winningProposal().call(); // proposition gagnante\r\n\r\n    let contractInformation = {\r\n      contractOwner: contractOwner,\r\n      currentWorkflowStatus: currentWorkflowStatus,\r\n      proposals: proposals,\r\n      votersAdresses: votersAdresses,\r\n      winningProposal: winningProposal\r\n    };\r\n    \r\n    this.setState({ contractInformation });\r\n    this.setAccountInformation();\r\n    \r\n    ////////////////////////////////////\r\n    // enregistrements des événements //\r\n    ////////////////////////////////////\r\n    contract.events.VoterAdded().on('data', (event) => this.handleVoterAdded(event))\r\n                                .on('error', (error) => console.error('Erreur VoterAdded : ' + Jsonify.stringify(error)));\r\n    contract.events.WorkflowStatusChange().on('data', (event) => this.handleWorkflowStatusChange(event))\r\n                                          .on('error', (error) => console.error('Erreur WorkflowStatusChange : ' + Jsonify.stringify(error)));\r\n    contract.events.ProposalRegistered().on('data', (event) => this.handleProposalRegistered(event))\r\n                                        .on('error', (error) => console.error('Erreur ProposalRegistered : ' + Jsonify.stringify(error)));\r\n    contract.events.Voted().on('data', (event) => this.handleVoted(event))\r\n                           .on('error', (error) => console.error('Erreur ProposalRegistered : ' + Jsonify.stringify(error)));\r\n    window.ethereum.on('accountsChanged', (accounts) => this.handleAccountsChanged(accounts));\r\n\r\n  }\r\n  \r\n  // définition des informations du compte connecté\r\n  setAccountInformation = async() => {\r\n    const { accounts, contract, contractInformation } = this.state;\r\n    const connectedAccount = accounts[0];\r\n\r\n    const voterInformation = await contract.methods.getVoter(connectedAccount).call(); // informations du compte connecté si il est voteur\r\n    const canVote = voterInformation && voterInformation.isRegistered && !voterInformation.hasVoted;\r\n    const isOwner = connectedAccount === contractInformation.contractOwner ? true : false;\r\n    const isRegistered = voterInformation && voterInformation.isRegistered;\r\n    const hasVoted = voterInformation && voterInformation.hasVoted;\r\n\r\n    this.logify('setAccountInformation - connectedAccount', connectedAccount);\r\n    this.logify('setAccountInformation - voterInformation', voterInformation);\r\n    this.logify('setAccountInformation - contractInformation', contractInformation);\r\n    this.logify('setAccountInformation - connectedAccount === contractInformation.contractOwner', connectedAccount === contractInformation.contractOwner);\r\n    \r\n    let accountInformation = {\r\n      account: connectedAccount,\r\n      canVote: canVote,\r\n      hasVoted: hasVoted,\r\n      isOwner: isOwner,\r\n      isRegistered: isRegistered\r\n    };\r\n    this.setState({ accountInformation });\r\n    this.setPageInformation(); // changing account means refreshing the page information as well\r\n  };\r\n  \r\n  // définition des éléments de la page en fonction du statut\r\n  setPageInformation = async() => {\r\n    const { accountInformation, contractInformation } = this.state;\r\n\r\n    this.logify('setPageInformation - accountInformation.isOwner', accountInformation.isOwner);\r\n    \r\n    let pageInformation = {\r\n      title: '',\r\n      explanation: '',\r\n      displayRegisterVoters: false,\r\n      displayStartProposal: false,\r\n      displayStopProposal: false,\r\n      displayRegisterProposal: false,\r\n      displaystartVotingSession: false,\r\n      displayStopVotingSession: false,\r\n      displayVoteForProposal: false,\r\n      displayAlreadyVoted: false,\r\n      displayCountVotes: false,\r\n      displayWinningProposal: false,\r\n      displayResetVote: accountInformation.isOwner\r\n    };    \r\n    switch (contractInformation.currentWorkflowStatus) {\r\n      case '0':\r\n        pageInformation.title = 'Enregistrement des votants en cours';\r\n        if (accountInformation.isOwner) {\r\n          pageInformation.explanation = 'Veuillez saisir les adresses qui pourront participer au vote (onglet \"Informations\")';\r\n        }\r\n        else {\r\n          pageInformation.explanation = 'Veuillez patienter, l\\'administrateur doit lister les adresses qui participeront au vote';\r\n        }\r\n        pageInformation.displayRegisterVoters = accountInformation.isOwner;\r\n        pageInformation.displayStartProposal = accountInformation.isOwner;\r\n        break;\r\n      case '1':\r\n        pageInformation.title = 'Enregistrement des propositions commencé';\r\n        pageInformation.explanation = 'Vous pouvez saisir une proposition';\r\n        pageInformation.displayStopProposal = accountInformation.isOwner;\r\n        pageInformation.displayRegisterProposal = accountInformation.canVote;\r\n        break;\r\n      case '2':\r\n        pageInformation.title = 'Enregistrement des propositions terminé';\r\n        pageInformation.explanation = 'La session de vote n\\'a pas encore démarré';\r\n        pageInformation.displaystartVotingSession = accountInformation.isOwner;\r\n        break;\r\n      case '3':\r\n        pageInformation.title = 'Session de votes démarrée';\r\n        if (accountInformation.hasVoted) {\r\n          pageInformation.explanation = 'Vous avez déjà voté';\r\n        }\r\n        else if (accountInformation.canVote) {\r\n          pageInformation.explanation = 'Vous pouvez désormais voter pour votre choix';\r\n        }\r\n        else {\r\n          pageInformation.explanation = 'Vous ne pouvez qu\\'assister aux votes en direct';\r\n        }\r\n        pageInformation.displayStopVotingSession = accountInformation.isOwner;\r\n        pageInformation.displayVoteForProposal = accountInformation.canVote;\r\n        pageInformation.displayAlreadyVoted = accountInformation.hasVoted;\r\n        break;\r\n      case '4':\r\n        pageInformation.title = 'Session de votes terminée';\r\n        pageInformation.explanation = 'Veuillez attendre que l\\'administrateur ait décompté les votes';\r\n        pageInformation.displayCountVotes = accountInformation.isOwner;\r\n        break;\r\n      case '5':\r\n        pageInformation.title = 'Votes comptés';\r\n        pageInformation.explanation = 'Les résultats sont disponibles dans le tableau des propositions';\r\n        pageInformation.displayWinningProposal = true;\r\n        break;\r\n      default:\r\n        this.alertAndLog('currentWorkflowStatus avec valeur inconnue.', contractInformation);\r\n        break;\r\n    }\r\n    this.setState({ pageInformation });\r\n  }\r\n  \r\n  // fonctions communes pour message utilisateur et debug via console\r\n  alertAndLog = async(message, objectToLog) => {\r\n    const { titreAppli } = this.state;\r\n    alert(message, titreAppli);\r\n    this.logify(message, objectToLog);\r\n  }\r\n  \r\n  // fonction pour logger en cas de debug\r\n  // ATTENTION: penser  mettre debugMode = true; dans le state en début de programme !\r\n  logify = async (message, objectToLog) => {\r\n    const { debugMode } = this.state;\r\n    if (debugMode) {\r\n      if (objectToLog) {\r\n        console.log(message + '\\nInformations complémentaires : ' + Jsonify.stringify(objectToLog));\r\n      }\r\n      else {\r\n        console.log(message);\r\n      }\r\n    }\r\n  }\r\n  \r\n  reloadProposals = async () => {\r\n    const { contract, contractInformation } = this.state;\r\n    contractInformation.proposals = await contract.methods.getProposals().call(); // liste des propositions\r\n    this.setState({ contractInformation });\r\n    this.setAccountInformation();\r\n  }\r\n  \r\n  ////////////////////////////\r\n  // Gestion des événements //\r\n  ////////////////////////////\r\n\r\n  handleAccountsChanged = async(newAccounts) => {\r\n    const { web3 } = this.state;\r\n    this.logify('handleAccountsChanged - newAccounts', newAccounts);\r\n    // ! obligation de reloader les accounts depuis web3.eth.getAccounts\r\n    // car différence de casse avec les accounts venant de window.ethereum.on('accountsChanged')\r\n    // Exemple :\r\n    // depuis web3.eth.getAccounts           = 0x1a1812a21248d769ce68c85c69a25a7092b26d82\r\n    // window.ethereum.on('accountsChanged') = 0x1a1812A21248D769cE68C85c69a25a7092B26D82\r\n    const reloadedAccounts = await web3.eth.getAccounts();\r\n    this.logify('handleAccountsChanged - reloadedAccounts', reloadedAccounts);\r\n    this.setState({ accounts: reloadedAccounts });\r\n    this.setAccountInformation();\r\n  }\r\n\r\n  handleVoterAdded = async(event) => {\r\n    this.logify('handleVoterAdded - event', event);\r\n    const { contract, contractInformation } = this.state;\r\n    contractInformation.votersAdresses = await contract.methods.getVotersAdresses().call(); // liste des comptes autorisés\r\n    this.setState({ contractInformation });    \r\n  }\r\n  \r\n  handleWorkflowStatusChange = async(event) => {\r\n    this.logify('handleWorkflowStatusChange - event', event);\r\n    const { contract, contractInformation } = this.state;\r\n    contractInformation.currentWorkflowStatus = event.returnValues.newStatus;\r\n    if (contractInformation.currentWorkflowStatus === '5') {\r\n      contractInformation.winningProposal = await contract.methods.winningProposal().call(); // proposition gagnante\r\n    }\r\n    this.setState({ contractInformation });    \r\n    this.setAccountInformation();\r\n  }\r\n  \r\n  handleProposalRegistered = async(event) => {\r\n    this.logify('handleProposalRegistered - event', event);\r\n    this.reloadProposals();\r\n  }\r\n\r\n  handleVoted = async(event) => {\r\n    this.logify('handleVoted - event', event);\r\n    this.reloadProposals();\r\n  }\r\n\r\n  //////////////////////////////\r\n  // fonctions Set du contrat //\r\n  //////////////////////////////\r\n\r\n  registerVoters = async() => {\r\n    const { accounts, contract } = this.state;\r\n    const address = this.address.value;\r\n    \r\n    // Interaction avec le smart contract pour ajouter un compte \r\n    await contract.methods.registerVoters(address).send({from: accounts[0]}).then(response => {\r\n      this.address.value = '';\r\n      this.logify('Enregistrement des propositions démarré.', response);\r\n    }).catch(error => {\r\n      var additionalInfo = '';\r\n      if (error && error.reason) {\r\n        additionalInfo = '\\n' + error.reason;\r\n      }\r\n      this.alertAndLog('Une erreur est survenue lors de l\\'enregistrement des votants.' + additionalInfo, error);\r\n    });\r\n  }\r\n \r\n  startProposalsRegistration = async() => {\r\n    const { accounts, contract } = this.state;\r\n    \r\n    await contract.methods.startProposalsRegistration().send({from: accounts[0]}).then(response => {\r\n      this.logify('Enregistrement des propositions démarré.', response);\r\n    }).catch(error => {\r\n      this.alertAndLog('Une erreur s\\'est produite au démarrage des propositions.', error);\r\n    });\r\n  }\r\n\r\n  registerProposal = async() => {\r\n    const { accounts, contract } = this.state;\r\n    const proposalDescription = this.proposalDescription.value;\r\n    \r\n    await contract.methods.registerProposal(proposalDescription).send({from: accounts[0]}).then(response => {\r\n      this.logify('Enregistrement d\\'une proposition : ' +this.proposalDescription.value, response);\r\n      this.proposalDescription.value= \"\";\r\n    }).catch(error => {\r\n      this.alertAndLog('Une erreur est survenue lors de l\\'ajout de la proposition.', error);\r\n    });\r\n  }\r\n \r\n  stopProposalsRegistration = async() => {\r\n    const { accounts, contract } = this.state;\r\n    \r\n    await contract.methods.stopProposalsRegistration().send({from: accounts[0]}).then(response => {\r\n      this.logify('Enregistrement des propositions terminé.', response);\r\n    }).catch(error => {\r\n      this.alertAndLog('Une erreur s\\'est produite à l\\'arrêt des propositions.', error);\r\n    });\r\n  }\r\n\r\n  startVotingSession = async() => {\r\n    const { accounts, contract } = this.state;\r\n    \r\n    await contract.methods.startVotingSession().send({from: accounts[0]}).then(response => {\r\n      this.logify('Session de votes démarrée.', response);\r\n    }).catch(error => {\r\n      this.alertAndLog('Une erreur s\\'est produite au démarrage de la session de votes.', error);\r\n    });\r\n  }\r\n  \r\n  stopVotingSession = async() => {\r\n    const { accounts, contract } = this.state;\r\n    \r\n    await contract.methods.stopVotingSession().send({from: accounts[0]}).then(response => {\r\n      this.logify('Session de votes terminée.', response);\r\n    }).catch(error => {\r\n      this.alertAndLog('Une erreur s\\'est produite à l\\'arrêt de la session de votes.', error);\r\n    });\r\n  }\r\n  \r\n  voteForProposal = async(event) => {\r\n    const { accounts, contract } = this.state;\r\n    event.persist(); // to avoid warning message = \"This synthetic event is reused for performance reasons\"\r\n    await contract.methods.voteForProposal(event.target.value).send({from: accounts[0]}).then(response => {\r\n      this.logify('Vote effectué pour la proposition numéro ' + event.target.value, response);\r\n    }).catch(error => {\r\n      this.alertAndLog('Une erreur est survenue lors du vote.', error);\r\n    });\r\n  }\r\n\r\n  countVotes = async() => {\r\n    const { accounts, contract } = this.state;\r\n    \r\n    await contract.methods.countVotes().send({from: accounts[0]}).then(response => {\r\n      this.logify('Décompte des votes effectué.', response);\r\n    }).catch(error => {\r\n      this.alertAndLog('Une erreur est survenue lors du décompte des votes.', error);\r\n    });\r\n  }\r\n\r\n  resetVote = async() => {\r\n    const { accounts, contract } = this.state;\r\n\r\n    await contract.methods.resetVote().send({from: accounts[0]}).then(response => {\r\n      this.logify('Remise à zéro des votes effectuée.', response);\r\n      this.runInit();\r\n    }).catch(error => {\r\n      this.alertAndLog('Une erreur est survenue lors de la remise à zéro des votes.', error);\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { accounts, accountInformation, contractInformation, pageInformation } = this.state;\r\n\r\n    let divInformations;\r\n    if (accountInformation && accountInformation.isOwner) {\r\n      divInformations = <div>Vous êtes le propriétaire du contrat, en conséquence l'administrateur du vote</div>;\r\n    } else {\r\n      divInformations = <div>Ici nous indiquerons le statut/avancement du vote et si l'utilisateur peut voter</div>;\r\n    }\r\n    \r\n    let divRegisterVoters;\r\n    let divOwnerProposals;\r\n    if (accountInformation && accountInformation.isOwner && pageInformation) {\r\n      if (pageInformation.displayRegisterVoters) {\r\n          divRegisterVoters = <div>\r\n                                <br/>\r\n                                <Form.Group>\r\n                                  <Form.Control type=\"text\" id=\"address\"\r\n                                  ref={(input) => { this.address = input }}\r\n                                  />\r\n                                </Form.Group>\r\n                                <Button onClick={ this.registerVoters } variant=\"dark\" >Ajouter un compte</Button>\r\n                              </div>;\r\n      }\r\n\r\n      let divStartProposal;\r\n      if (pageInformation.displayStartProposal) {\r\n        divStartProposal = <div>\r\n                             <br/>\r\n                             <Button onClick={ this.startProposalsRegistration } variant=\"dark\" >Démarrer l'enregistrement des propositions</Button>\r\n                           </div>;\r\n      }\r\n      let divStopProposal;\r\n      if (pageInformation.displayStopProposal) {\r\n        divStartProposal = <div>\r\n                             <br/>\r\n                             <Button onClick={ this.stopProposalsRegistration } variant=\"dark\" >Arrêter l'enregistrement des propositions</Button>\r\n                           </div>;\r\n      }\r\n      \r\n      divOwnerProposals = <div>\r\n                            {divStartProposal}\r\n                            {divStopProposal}\r\n                            <br/>\r\n                          </div>;\r\n    }\r\n    \r\n    let divAjouterProposition;\r\n    if (pageInformation && pageInformation.displayRegisterProposal) {\r\n      divAjouterProposition = <>\r\n                                <Card.Body>\r\n                                  <Form.Group>\r\n                                    <Form.Control type=\"text\" id=\"proposalDescription\"\r\n                                    ref={(input) => { this.proposalDescription = input }}\r\n                                    />\r\n                                  </Form.Group>\r\n                                  <Button onClick={ this.registerProposal } variant=\"dark\" >Ajouter la proposition</Button>\r\n                                </Card.Body>\r\n                              </>;\r\n    }\r\n    \r\n    let divVoting;\r\n    if (pageInformation && (pageInformation.displaystartVotingSession ||\r\n                            pageInformation.displayStopVotingSession ||\r\n                            pageInformation.displayVoteForProposal)) {\r\n      let divstartVotingSession;\r\n      if (pageInformation.displaystartVotingSession) {\r\n        divstartVotingSession = <>\r\n                                  <div>\r\n                                    <Button onClick={ this.startVotingSession } variant=\"dark\" >Démarrer les votes </Button>\r\n                                    <br/>\r\n                                  </div>\r\n                                </>;\r\n      }\r\n      let divStopVotingSession;\r\n      if (pageInformation.displayStopVotingSession) {\r\n        divStopVotingSession = <>\r\n                                 <div>\r\n                                   <Button onClick={ this.stopVotingSession } variant=\"dark\" >Arrêter les votes </Button>\r\n                                   <br/>\r\n                                 </div>\r\n                               </>;\r\n      }\r\n      let divVoteForProposal;\r\n      if (pageInformation.displayVoteForProposal) {\r\n        divVoteForProposal = <>\r\n                               <br/>\r\n                               <Form.Group>\r\n                                 <Form.Control type=\"number\" id=\"voteNumber\" min=\"0\" max=\"{ contractInformation.proposals && contractInformation.proposals.length }\"\r\n                                 ref={(input) => { this.voteNumber = input }}\r\n                                 />\r\n                               </Form.Group>\r\n                               <Button onClick={ this.voteForProposal } variant=\"dark\" >Voter pour un numéro de proposition</Button>\r\n                             </>;\r\n      }\r\n      \r\n      divVoting = <>\r\n                  <br></br>\r\n                  <div style={{display: 'flex', justifyContent: 'center'}}>\r\n                    <Card style={{ width: '50rem' }}>\r\n                      <Card.Header><strong>Votes</strong></Card.Header>\r\n                      <Card.Body>\r\n                        {divstartVotingSession}\r\n                        {divStopVotingSession}\r\n                        {divVoteForProposal}\r\n                      </Card.Body>\r\n                    </Card>\r\n                  </div>\r\n                </>;\r\n\r\n    }\r\n\r\n    let divCountVotes;\r\n    if (pageInformation && pageInformation.displayCountVotes) {\r\n      divCountVotes = <>\r\n                        <Card.Body>\r\n                          <Button onClick={ this.countVotes } variant=\"dark\" >Décompte des votes</Button>\r\n                        </Card.Body>\r\n                      </>;\r\n    }\r\n    \r\n    let divWinningProposal;\r\n    if (pageInformation && pageInformation.displayWinningProposal) {\r\n      divWinningProposal = <div>\r\n                             Proposition remportant le vote : \"{contractInformation != null && contractInformation.winningProposal.description}\"\r\n                             &nbsp;avec {contractInformation != null && contractInformation.winningProposal.voteCount} vote(s).\r\n                           </div>;\r\n    }\r\n    \r\n    let divResetVote; // always available as soon as the connectted account is the owner, so that we can proceed with tests\r\n    if (pageInformation && pageInformation.displayResetVote) {\r\n      divResetVote = <div>\r\n                       <Button onClick={ this.resetVote } variant=\"dark\" >Reset complet</Button>\r\n                     </div>;\r\n    }\r\n    \r\n    const tdVoteForProposal = (index) => {\r\n      if (pageInformation && pageInformation.displayVoteForProposal) {\r\n        return <>\r\n                 <Button onClick={ this.voteForProposal } value={index} variant=\"dark\" >Voter</Button>&nbsp;\r\n               </>;\r\n      }\r\n      else {\r\n        return <></>;\r\n      }\r\n    }\r\n    \r\n    return (\r\n      <div className=\"App\">\r\n        <Tabs defaultActiveKey=\"vote\" id=\"defi-tabs\">\r\n          <Tab eventKey=\"vote\" title=\"Vote\">\r\n            <div>\r\n              <h3 className=\"text-center\">Bienvenue sur le défi \"Système de vote\"</h3>\r\n              <hr></hr>\r\n              <br></br>\r\n            </div>\r\n            <br/>\r\n            <div style={{display: 'flex', justifyContent: 'center'}}>\r\n              <Card style={{ width: '50rem' }}>\r\n                <Card.Header><strong>{pageInformation && pageInformation.title}</strong></Card.Header>\r\n                <Card.Body>\r\n                  {pageInformation && pageInformation.explanation}\r\n                </Card.Body>\r\n              </Card>\r\n            </div>\r\n            {/* Propositions */}\r\n            <br></br>\r\n            <div style={{display: 'flex', justifyContent: 'center'}}>\r\n              <Card style={{ width: '50rem' }}>\r\n                <Card.Header><strong>Liste des propositions et votes associés</strong></Card.Header>\r\n                {divAjouterProposition}\r\n                {divOwnerProposals}\r\n                {/* Affichage de la proposition gagnante */}\r\n                {divWinningProposal}\r\n                <ListGroup variant=\"flush\">\r\n                  <ListGroup.Item>\r\n                    <Table striped bordered hover>\r\n                      <thead>\r\n                        <tr>\r\n                          <th>Numéro</th>\r\n                          <th>Proposition</th>\r\n                          <th>Nombre de votes</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {contractInformation && typeof(contractInformation.proposals) !== 'undefined' && contractInformation.proposals !== null && \r\n                          contractInformation.proposals.map((proposalRecord, index) =>\r\n                            <tr key={index}>\r\n                              <td>{tdVoteForProposal(index)}{index}</td>\r\n                              <td>{proposalRecord.description}</td>\r\n                              <td>{proposalRecord.voteCount}</td>\r\n                            </tr>)\r\n                        }\r\n                      </tbody>\r\n                    </Table>\r\n                  </ListGroup.Item>\r\n                </ListGroup>\r\n              </Card>\r\n            </div>\r\n            {/* Votes */}\r\n            {divVoting}\r\n            {/* Décompte des votes */}\r\n            {divCountVotes}\r\n          </Tab>\r\n          <Tab eventKey=\"informations\" title=\"Informations\">\r\n            <div>\r\n              <h3 className=\"text-center\">Informations</h3>\r\n              <hr></hr>\r\n              <br></br>\r\n            </div>\r\n            <div style={{display: 'flex', justifyContent: 'center'}}>\r\n              <Card style={{ width: '50rem' }}>\r\n                <Card.Header><strong>Informations sur le contrat</strong></Card.Header>\r\n                <Card.Body>\r\n                  <ul>\r\n                    <li>Propriétaire du contrat : {contractInformation && contractInformation.contractOwner}</li>\r\n                    <li>Compte connecté : {accounts !== null && \r\n                                           accounts.map((accountRecord) => <span key={accountRecord.toString()}>{accountRecord}</span>)\r\n                                           }\r\n                    </li>\r\n                    <li>{divInformations}</li>\r\n                  </ul>\r\n                  {divResetVote}\r\n                </Card.Body>\r\n                {divRegisterVoters}\r\n                <ListGroup variant=\"flush\">\r\n                  <ListGroup.Item>\r\n                    <Table striped bordered hover>\r\n                      <thead>\r\n                        <tr>\r\n                          <th>Liste des comptes autorisés</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {contractInformation && typeof(contractInformation.votersAdresses) !== 'undefined' && contractInformation.votersAdresses !== null && \r\n                          contractInformation.votersAdresses.map((a) => <tr key={a.toString()}><td>{a}</td></tr>)\r\n                        }\r\n                      </tbody>\r\n                    </Table>\r\n                  </ListGroup.Item>\r\n                </ListGroup>\r\n              </Card>\r\n            </div>\r\n          </Tab>\r\n          <Tab eventKey=\"explications\" title=\"Explications\">\r\n            <div>\r\n              <h3 className=\"text-center\">Explications</h3>\r\n              <hr></hr>\r\n              <br></br>\r\n            </div>\r\n            <div style={{display: 'flex', justifyContent: 'center'}}>\r\n              <Card style={{ width: '50rem' }}>\r\n                <Card.Header><strong>But du site</strong></Card.Header>\r\n                <Card.Body>\r\n                  <div>Bienvenue sur le site de vote réalisé dans le cadre de l&acute;exercice \"Défi - Système de vote\" de l&acute;école de la blockchain Alyra.</div>\r\n                  <br></br>\r\n                  <div>Rappel de l&acute;énoncé</div>\r\n                  <br></br>\r\n                  <div>Un smart contract de vote peut être simple ou complexe, selon les exigences des élections que vous souhaitez soutenir. Le vote peut porter sur un petit nombre de propositions (ou de candidats) présélectionnées, ou sur un nombre potentiellement important de propositions suggérées de manière dynamique par les électeurs eux-mêmes.</div>\r\n                  <br></br>\r\n                  <div>Dans ce cadres, vous allez écrire un smart contract de vote pour une petite organisation. Les électeurs, que l&acute;organisation connaît tous, sont inscrits sur une liste blanche (whitelist) grâce à leur adresse Ethereum, peuvent soumettre de nouvelles propositions lors d&acute;une session d&acute;enregistrement des propositions, et peuvent voter sur les propositions lors de la session de vote.</div>\r\n                  <br></br>\r\n                  <div>Le vote n&acute;est pas secret ; chaque électeur peut voir les votes des autres.</div>\r\n                  <br></br>\r\n                  <div>Le gagnant est déterminé à la majorité simple ; la proposition qui obtient le plus de voix l&acute;emporte.</div>\r\n                  <br></br>\r\n                  <br></br>\r\n                  <div>Le processus de vote : </div>\r\n                  <br></br>\r\n                  <div>Voici le déroulement de l&acute;ensemble du processus de vote :</div>\r\n                  <ul>\r\n                    <li>L&acute;administrateur du vote enregistre une liste blanche d&acute;électeurs identifiés par leur adresse Ethereum.</li>\r\n                    <li>L&acute;administrateur du vote commence la session d&acute;enregistrement de la proposition.</li>\r\n                    <li>Les électeurs inscrits sont autorisés à enregistrer leurs propositions pendant que la session d&acute;enregistrement est active.</li>\r\n                    <li>L&acute;administrateur de vote met fin à la session d&acute;enregistrement des propositions.</li>\r\n                    <li>L&acute;administrateur du vote commence la session de vote.</li>\r\n                    <li>Les électeurs inscrits votent pour leurs propositions préférées.</li>\r\n                    <li>L&acute;administrateur du vote met fin à la session de vote.</li>\r\n                    <li>L&acute;administrateur du vote comptabilise les votes.</li>\r\n                    <li>Tout le monde peut vérifier les derniers détails de la proposition gagnante.</li>\r\n                  </ul>\r\n                </Card.Body>\r\n              </Card>\r\n            </div>\r\n          </Tab>\r\n        </Tabs>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}